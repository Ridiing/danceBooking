{{> partials/header}}

<div class="form-card">
  <h2>Available Courses</h2>

  <div class="course-list">
    {{#courses}}
      <div class="course-card">
        <h3>{{name}} – £{{price}}</h3>
        <p>{{description}}</p>
        <p><strong>Duration:</strong> {{duration}}</p>

        <p><strong>Class Schedule:</strong></p>
        <ul>
          {{#classes}}
            <li>{{date}} at {{time}} – {{location}}</li>
          {{/classes}}
        </ul>

        <!-- If organiser, show edit/delete/view -->
        {{#isOrganiser}}
        <div class="course-actions">
          <a href="/courses/{{_id}}/participants" class="btn btn-secondary">View Participants</a>
          <a href="/courses/edit/{{_id}}" class="btn">Edit</a>
          <a href="/courses/delete/{{_id}}" class="btn btn-danger">Delete</a>
        </div>
        {{/isOrganiser}}

        <!-- If logged in and NOT organiser, show Enroll button -->
        {{#user}}
          {{^isOrganiser}}
            <form method="POST" action="/enrol/{{_id}}">
              <button type="submit" class="btn">Enroll</button>
            </form>
          {{/isOrganiser}}
        {{/user}}

      </div>
    {{/courses}}
  </div>

  <a href="/" class="back-button">Back to Home</a>
</div>

{{> partials/footer}}
